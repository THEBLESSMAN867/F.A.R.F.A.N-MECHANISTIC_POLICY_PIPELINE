[importlinter]
root_packages = farfan_core

[contract:core-no-analysis]
name = Core (excluding orchestrator) must not import analysis
type = forbidden
source_modules =
    farfan_core.core.calibration
    farfan_core.core.wiring
forbidden_modules =
    farfan_core.analysis
    farfan_core.processing
    farfan_core.api

[contract:core-orchestrator-no-analysis]
name = Core orchestrator must not import analysis
type = forbidden
source_modules =
    farfan_core.core.orchestrator
forbidden_modules =
    farfan_core.analysis

[contract:processing-no-orchestrator]
name = Processing layer cannot import orchestrator
type = forbidden
source_modules =
    farfan_core.processing
forbidden_modules =
    farfan_core.core.orchestrator

[contract:analysis-no-orchestrator]
name = Analysis layer cannot import orchestrator
type = forbidden
source_modules =
    farfan_core.analysis
forbidden_modules =
    farfan_core.core.orchestrator

[contract:analysis-dep-core]
name = Analysis depends on core but not infrastructure
type = forbidden
source_modules =
    farfan_core.analysis
forbidden_modules =
    farfan_core.infrastructure

[contract:infrastructure-no-orchestrator]
name = Infrastructure must not pull orchestrator
type = forbidden
source_modules =
    farfan_core.infrastructure
forbidden_modules =
    farfan_core.core.orchestrator

[contract:api-boundaries]
name = API layer only calls orchestrator entry points
type = forbidden
source_modules =
    farfan_core.api
forbidden_modules =
    farfan_core.processing
    farfan_core.analysis
    farfan_core.utils

[contract:utils-leaf]
name = Utils stay leaf modules
type = forbidden
source_modules =
    farfan_core.utils
forbidden_modules =
    farfan_core.core.orchestrator
    farfan_core.processing
    farfan_core.analysis

