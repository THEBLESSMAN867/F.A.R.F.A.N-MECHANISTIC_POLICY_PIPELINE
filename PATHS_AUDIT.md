# Path Audit Report

**Generated by:** `scripts/audit_paths.py`
**Repository:** /Users/recovered/F.A.R.F.A.N-MECHANISTIC_POLICY_PIPELINE_FINAL/F.A.R.F.A.N-MECHANISTIC_POLICY_PIPELINE_FINAL

## Executive Summary

- **Files Scanned:** 422
- **Total Findings:** 210
- **Critical:** 0
- **High:** 0
- **Medium:** 210
- **Low:** 0

## Findings by Severity

### MEDIUM (210)

#### cwd_usage (3 occurrences)

- **scripts/audit_paths.py:215**
  - Current working directory usage - fragile in different execution contexts
  - Code: `# os.getcwd() or Path.cwd()`
  - Fix: Use proj_root() or explicit paths from saaaaaa.utils.paths

- **src/saaaaaa/audit/audit_system.py:926**
  - Current working directory usage - fragile in different execution contexts
  - Code: `default=Path.cwd(),`
  - Fix: Use proj_root() or explicit paths from saaaaaa.utils.paths

- **src/saaaaaa/core/wiring/bootstrap.py:552**
  - Current working directory usage - fragile in different execution contexts
  - Code: `project_root = Path.cwd()`
  - Fix: Use proj_root() or explicit paths from saaaaaa.utils.paths

#### file_usage (61 occurrences)

- **setup.py:27**
  - __file__ usage detected - may break in packaged distributions
  - Code: `readme_file = Path(__file__).parent / "README.md"`
  - Fix: Use resources() for packaged data or proj_root() for workspace-relative paths

- **tools/scan_core_purity.py:93**
  - __file__ usage detected - may break in packaged distributions
  - Code: `repo_root = Path(__file__).parent.parent`
  - Fix: Use resources() for packaged data or proj_root() for workspace-relative paths

- **tools/grep_boundary_checks.py:13**
  - __file__ usage detected - may break in packaged distributions
  - Code: `REPO_ROOT = Path(__file__).resolve().parent.parent`
  - Fix: Use resources() for packaged data or proj_root() for workspace-relative paths

- **tests/test_dependency_management.py:21**
  - __file__ usage detected - may break in packaged distributions
  - Code: `return Path(__file__).parent.parent`
  - Fix: Use resources() for packaged data or proj_root() for workspace-relative paths

- **tests/test_dependency_management.py:275**
  - __file__ usage detected - may break in packaged distributions
  - Code: `script_path = Path(__file__).parent.parent / "scripts" / "generate_dependency_files.py"`
  - Fix: Use resources() for packaged data or proj_root() for workspace-relative paths

- **tests/test_dependency_management.py:287**
  - __file__ usage detected - may break in packaged distributions
  - Code: `script = Path(__file__).parent.parent / "scripts" / "compare_freeze_lock.py"`
  - Fix: Use resources() for packaged data or proj_root() for workspace-relative paths

- **tests/test_dependency_management.py:309**
  - __file__ usage detected - may break in packaged distributions
  - Code: `script = Path(__file__).parent.parent / "scripts" / "compare_freeze_lock.py"`
  - Fix: Use resources() for packaged data or proj_root() for workspace-relative paths

- **tests/test_structure_verification.py:16**
  - __file__ usage detected - may break in packaged distributions
  - Code: `repo_root = Path(__file__).parent.parent`
  - Fix: Use resources() for packaged data or proj_root() for workspace-relative paths

- **tests/conftest.py:12**
  - __file__ usage detected - may break in packaged distributions
  - Code: `PROJECT_ROOT = Path(__file__).resolve().parents[1]`
  - Fix: Use resources() for packaged data or proj_root() for workspace-relative paths

- **tests/test_proof_generator.py:72**
  - __file__ usage detected - may break in packaged distributions
  - Code: `src_root = Path(__file__).parent.parent / "src" / "saaaaaa"`
  - Fix: Use resources() for packaged data or proj_root() for workspace-relative paths

  ... and 51 more occurrences

#### hardcoded_separator (144 occurrences)

- **determine_parameter_values_OLD.py:94**
  - Potential hardcoded path separator detected
  - Code: `"url": "https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.ht`
  - Fix: Use Path.joinpath() or / operator

- **determine_parameter_values_OLD.py:123**
  - Potential hardcoded path separator detected
  - Code: `"url": "https://huggingface.co/transformers/model_doc/bert.html",`
  - Fix: Use Path.joinpath() or / operator

- **determine_parameter_values.py:94**
  - Potential hardcoded path separator detected
  - Code: `"url": "https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.ht`
  - Fix: Use Path.joinpath() or / operator

- **determine_parameter_values.py:123**
  - Potential hardcoded path separator detected
  - Code: `"url": "https://huggingface.co/transformers/model_doc/bert.html",`
  - Fix: Use Path.joinpath() or / operator

- **comprehensive_knowledge_base.py:49**
  - Potential hardcoded path separator detected
  - Code: `"url": "https://www.jmlr.org/papers/v13/bergstra12a.html",`
  - Fix: Use Path.joinpath() or / operator

- **comprehensive_knowledge_base.py:63**
  - Potential hardcoded path separator detected
  - Code: `"url": "https://www.jmlr.org/papers/v12/pedregosa11a.html",`
  - Fix: Use Path.joinpath() or / operator

- **comprehensive_knowledge_base.py:155**
  - Potential hardcoded path separator detected
  - Code: `"url": "https://numpy.org/doc/stable/",`
  - Fix: Use Path.joinpath() or / operator

- **comprehensive_knowledge_base.py:162**
  - Potential hardcoded path separator detected
  - Code: `"url": "https://docs.scipy.org/doc/scipy/",`
  - Fix: Use Path.joinpath() or / operator

- **comprehensive_knowledge_base.py:169**
  - Potential hardcoded path separator detected
  - Code: `"url": "https://scikit-learn.org/stable/documentation.html",`
  - Fix: Use Path.joinpath() or / operator

- **comprehensive_knowledge_base.py:176**
  - Potential hardcoded path separator detected
  - Code: `"url": "https://pandas.pydata.org/docs/",`
  - Fix: Use Path.joinpath() or / operator

  ... and 134 more occurrences

#### os_path_usage (2 occurrences)

- **scripts/smart_policy_chunks_canonic_phase_one.py:3462**
  - os.path usage detected
  - Code: `output_dir = os.path.dirname(args.output) or '.'`
  - Fix: Use pathlib.Path instead of os.path

- **src/saaaaaa/compat/native_check.py:119**
  - os.path usage detected
  - Code: `dll_path = os.path.join(path_dir, f"{libname}.dll")`
  - Fix: Use pathlib.Path instead of os.path

## Findings by Category

### hardcoded_separator: 144 occurrences

### file_usage: 61 occurrences

### cwd_usage: 3 occurrences

### os_path_usage: 2 occurrences


## Recommendations

1. **Eliminate sys.path manipulation**: Use proper package imports
2. **Remove absolute paths**: Use `proj_root()`, `data_dir()`, etc. from `saaaaaa.utils.paths`
3. **Replace os.path with pathlib.Path**: More portable and Pythonic
4. **Use resources() for packaged data**: Ensures compatibility with wheels/sdist
5. **Validate all path operations**: Use `validate_read_path()` and `validate_write_path()`
6. **Add path traversal protection**: Use `safe_join()` for user-provided paths
7. **Use temp_dir() instead of hardcoded /tmp**: Ensures controlled cleanup

## Next Steps

1. Create tests under `tests/paths/` to enforce these rules
2. Fix critical and high severity issues first
3. Add pre-commit hooks to prevent regressions
4. Update CI to test on Windows, macOS, and Linux
5. Document path handling guidelines in README
