[importlinter]
root_package = saaaaaa

[importlinter:contract:core-foundation]
name = Core must stay independent
type = forbidden
source_modules =
    saaaaaa.core
forbidden_modules =
    saaaaaa.core.orchestrator
    saaaaaa.analysis
    saaaaaa.processing
    saaaaaa.api

[importlinter:contract:orchestrator-depends-core]
name = Orchestrator may depend on core but not vice versa
type = independence
modules =
    saaaaaa.core.orchestrator
    saaaaaa.core

[importlinter:contract:processing-no-orchestrator]
name = Processing layer cannot import orchestrator
type = forbidden
source_modules =
    saaaaaa.processing
forbidden_modules =
    saaaaaa.core.orchestrator

[importlinter:contract:analysis-no-orchestrator]
name = Analysis layer cannot import orchestrator
type = forbidden
source_modules =
    saaaaaa.analysis
forbidden_modules =
    saaaaaa.core.orchestrator

[importlinter:contract:analysis-dep-core]
name = Analysis depends on core but not infrastructure
type = forbidden
source_modules =
    saaaaaa.analysis
forbidden_modules =
    saaaaaa.infrastructure

[importlinter:contract:infrastructure-no-orchestrator]
name = Infrastructure must not pull orchestrator
type = forbidden
source_modules =
    saaaaaa.infrastructure
forbidden_modules =
    saaaaaa.core.orchestrator

[importlinter:contract:api-boundaries]
name = API layer only calls orchestrator entry points
type = forbidden
source_modules =
    saaaaaa.api
forbidden_modules =
    saaaaaa.processing
    saaaaaa.analysis
    saaaaaa.utils

[importlinter:contract:utils-leaf]
name = Utils stay leaf modules
type = forbidden
source_modules =
    saaaaaa.utils
forbidden_modules =
    saaaaaa.core.orchestrator
    saaaaaa.processing
    saaaaaa.analysis
